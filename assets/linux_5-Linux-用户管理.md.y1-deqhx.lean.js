import{_ as a,c as i,a0 as e,o as n}from"./chunks/framework.CGHvQLJz.js";const g=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"linux/5-Linux-用户管理.md","filePath":"linux/5-Linux-用户管理.md"}'),l={name:"linux/5-Linux-用户管理.md"};function p(t,s,d,o,h,c){return n(),i("div",null,s[0]||(s[0]=[e(`<p>Linux是一个多用户、多任务的操作系统，不同的用户拥有不同的权限，这样可以保护系统的安全，防止数据泄露和未授权的访问。简单来说，就是通过给用户设置不同的“权限大门”，来确保只有对的人能进到对的“房间”。</p><h2 id="_1-useradd-增加用户" tabindex="-1">1. useradd 增加用户 <a class="header-anchor" href="#_1-useradd-增加用户" aria-label="Permalink to &quot;1. useradd  增加用户&quot;">​</a></h2><p>增加用户可以使用 useradd 命令。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/passwd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/shadow</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/group</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/gshadow</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ll</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ll</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/spool/mail</span></span></code></pre></div><h5 id="useradd命令格式" tabindex="-1">useradd命令格式 <a class="header-anchor" href="#useradd命令格式" aria-label="Permalink to &quot;useradd命令格式&quot;">​</a></h5><p>如果你想指定UID</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> UID</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 新用户名</span></span></code></pre></div><p>如果你想指定用户的家目录，可以使用 -d 选项：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/新用户目录</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 新用户名</span></span></code></pre></div><p>如果你想指定用户说明</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;用户说明&#39;</span></span></code></pre></div><p>如果你想指定用户初始组</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 组名</span></span></code></pre></div><p>如果你想指定用户附加组</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -G</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 附加组</span></span></code></pre></div><p>如果你想指定用户的登录shell。默认是/bin/bash</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /bin/bash</span></span></code></pre></div><p>例子：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>useradd -u 502 -d /home/user02 -c &#39;user02&#39; -G root -s /bin/bash user2</span></span></code></pre></div><h5 id="用户默认配置-etc-default-useradd" tabindex="-1">用户默认配置/etc/default/useradd <a class="header-anchor" href="#用户默认配置-etc-default-useradd" aria-label="Permalink to &quot;用户默认配置/etc/default/useradd&quot;">​</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>GROUP=100    默认的用户组</span></span>
<span class="line"><span>HOME=/home   默认的家目录所在目录</span></span>
<span class="line"><span>INACTIVE=-1  密码过期天数</span></span>
<span class="line"><span>EXPIRE=      帐号失效时间</span></span>
<span class="line"><span>SHELL=/bin/bash 默认shell</span></span>
<span class="line"><span>SKEL=/etc/skel  使用者家目录的参考目录</span></span>
<span class="line"><span>CREATE_MAIL_SPOOL=yes 是否建立邮箱</span></span></code></pre></div><h5 id="密码参数参考配置-etc-login-defs" tabindex="-1">密码参数参考配置/etc/login.defs <a class="header-anchor" href="#密码参数参考配置-etc-login-defs" aria-label="Permalink to &quot;密码参数参考配置/etc/login.defs&quot;">​</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>PASS_MAX_DAYS 99999 密码有效期</span></span>
<span class="line"><span>PASS_MIN_DAYS 0     密码修改间隔时间</span></span>
<span class="line"><span>PASS_MIN_LEN 5      密码最小5位</span></span>
<span class="line"><span>PASS_WARN_AGE 7     密码到期警告</span></span>
<span class="line"><span>UID_MIN       1000   </span></span>
<span class="line"><span>UID_MAX       6000  UID最小范围和最大范围</span></span>
<span class="line"><span>GID_MIN       1000</span></span>
<span class="line"><span>GID_MAX       6000  GID最小范围和最大范围</span></span>
<span class="line"><span>ENCRYPT_METHOD SHA512  加密模式</span></span></code></pre></div><h2 id="_2-passwd-设置用户密码" tabindex="-1">2. passwd 设置用户密码 <a class="header-anchor" href="#_2-passwd-设置用户密码" aria-label="Permalink to &quot;2.  passwd  设置用户密码&quot;">​</a></h2><p>新创建的用户需要设置密码后才能登录。设置密码使用 passwd 命令。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>passwd 用户名</span></span></code></pre></div><p>系统会提示你输入并确认密码。</p><p>查看用户密码信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>passwd -S 用户名</span></span></code></pre></div><p>锁定用户</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>passwd -l 用户名</span></span></code></pre></div><p>解锁用户</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>passwd -u 用户名</span></span></code></pre></div><h2 id="_3-userdel-删除用户" tabindex="-1">3. userdel 删除用户 <a class="header-anchor" href="#_3-userdel-删除用户" aria-label="Permalink to &quot;3. userdel  删除用户&quot;">​</a></h2><p>删除用户使用 userdel 命令。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>userdel 要删除的用户名</span></span></code></pre></div><p>如果你同时想删除用户的主目录及邮箱等配置文件，可以使用 -r 选项：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>userdel -r 要删除的用户名</span></span></code></pre></div><h2 id="_1-id-查看用户信息" tabindex="-1">1. id 查看用户信息 <a class="header-anchor" href="#_1-id-查看用户信息" aria-label="Permalink to &quot;1.  id   查看用户信息&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>id 用户名</span></span></code></pre></div><h2 id="_2-who-am-i-查看当前登录用户" tabindex="-1">2. who am i 查看当前登录用户 <a class="header-anchor" href="#_2-who-am-i-查看当前登录用户" aria-label="Permalink to &quot;2. who am i   查看当前登录用户&quot;">​</a></h2><p>查看当前登录的用户可以使用以下命令：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>who am i</span></span></code></pre></div><h2 id="_3-su-切换用户" tabindex="-1">3. su 切换用户 <a class="header-anchor" href="#_3-su-切换用户" aria-label="Permalink to &quot;3. su               切换用户&quot;">​</a></h2><p>切换用户可以使用 su 命令。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>su - 用户名</span></span></code></pre></div><h2 id="_1-usermod-修改用户信息" tabindex="-1">1. usermod 修改用户信息 <a class="header-anchor" href="#_1-usermod-修改用户信息" aria-label="Permalink to &quot;1.  usermod   修改用户信息&quot;">​</a></h2><p>修改用户信息使用 usermod 命令。</p><p>修改用户的家目录：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>usermod -d 新家目录 用户名</span></span></code></pre></div><p>修改用户所属的用户组：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>usermod -g 新用户组 用户名</span></span></code></pre></div><h2 id="_2-groupadd-添加组" tabindex="-1">2. groupadd 添加组 <a class="header-anchor" href="#_2-groupadd-添加组" aria-label="Permalink to &quot;2. groupadd   添加组&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>groupadd 组名</span></span></code></pre></div><h2 id="_3-groupdel-删除组" tabindex="-1">3. groupdel 删除组 <a class="header-anchor" href="#_3-groupdel-删除组" aria-label="Permalink to &quot;3. groupdel    删除组&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>groupdel 组名</span></span></code></pre></div><h2 id="_1-gpasswd-基本用法" tabindex="-1">1. gpasswd 基本用法 <a class="header-anchor" href="#_1-gpasswd-基本用法" aria-label="Permalink to &quot;1. gpasswd 基本用法&quot;">​</a></h2><p><code>gpasswd</code>是Linux系统中用于管理用户组的命令，其功能是修改用户组的密码、添加或删除用户组成员、设置用户组的管理员等。</p><p><code>gpasswd</code>命令的基本语法为：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gpasswd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [选项] [组名]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-a,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 用户名：将指定的用户添加到组中。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-d,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --delete</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 用户名：从组中删除指定的用户。</span></span></code></pre></div><p>在Linux操作系统中，<code>/etc/passwd</code>是一个重要的文件，它用于存储系统所有用户账户的信息。</p><ol><li><strong>（第一字段）用户名</strong>：这是用户的登录名，也是用户在登录时输入的名称。</li><li><strong>（第二字段）加密密码</strong>：通常用一个<code>x</code>表示，这并不是真正的密码，而是指密码被加密存储在另一个文件<code>/etc/shadow</code>中。在早期的 Unix 系统中，这个字段确实存储了加密后的用户密码。但出于安全考虑，现代 Linux 系统不再将密码存储在这里。</li><li><strong>（第三字段）用户ID（UID）</strong>：每个用户都有一个唯一的用户ID。 UID为0的通常是超级用户root。 UID（1-999，但这个范围可能因发行版而异）系统用户（也称为伪用户)， UID（1000-65535）而普通用户。</li><li><strong>（第四字段）组ID（GID）</strong>：这个字段标识了用户所属的主组（primary group）的ID号。</li><li><strong>（第五字段）描述信息</strong>：这一列通常用来存储用户的全名或其他描述信息，但很多时候这个字段被忽略，仅作为一个占位符。</li><li><strong>（第六字段）用户宿主目录</strong>：这个字段指定了用户登录后默认的家目录路径。</li><li><strong>（第七字段）用户默认登录的shell</strong>：这个字段标识了用户登录后默认的shell程序。比如，<code>/bin/bash</code>。</li></ol><p>每一列的信息都是用冒号（:）分隔的。</p><p>例如，一个典型的<code>/etc/passwd</code>文件中的用户记录可能如下所示：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>root:x:0:0:root:/root:/bin/bash</span></span></code></pre></div><ul><li><code>root</code>是用户名</li><li><code>x</code>表示密码占位符</li><li><code>0</code>是用户ID，代表超级用户</li><li><code>0</code>是组ID，通常也是超级用户组</li><li><code>root</code>是描述信息</li><li><code>/root</code>是用户root的家目录</li><li><code>/bin/bash</code>是用户登录后使用的shell</li></ul><p>需要注意的是，<code>/etc/passwd</code>文件对所有用户可读，但只有超级用户（root）可以修改它，以保持系统的安全性。</p><p><code>/etc/shadow</code> 文件是 Linux 系统中存储用户密码信息的重要文件。它包含了每个用户的加密后的密码、最后一次密码更改的日期、密码过期前的天数等信息。这个文件只有 root 用户可以读取和写入，以确保密码的安全性。</p><p><code>/etc/shadow</code> 文件的每一行代表一个用户账户，各字段之间用冒号（：）分隔。以下是各个字段的含义：</p><ol><li>（第一字段）用户名：表示用户账户的名称。</li><li>（第二字段）加密后的密码：如果该字段以 <code>!</code> 或 <code>*</code> 开头，表示密码已被锁定或禁用。如果是 <code>!</code>，则表示密码已被锁定；如果是 <code>*</code>，则表示账户已被禁用。</li><li>（第三字段）最后一次密码更改的日期：从 1970 年 1 月 1 日开始的天数。</li><li>（第四字段）两次密码的修改间隔：表示密码每隔多少天后需要更改。如果设置为 0，则表示密码永不过期。</li><li>（第五字段）密码有效期：表示在密码多少天内有效。</li><li>（第六字段）密码到期的提前警告天数：表示距离密码过期还有多少天时，系统会开始发出警告。</li><li>（第七字段）密码过期后的宽限天数：表示密码过期后，账户被禁用前的宽限天数。</li><li>（第八字段）账户失效日期：表示账户被禁用的日期，用时间戳表示。</li><li>（第九字段）保留字段：通常为空，用于未来扩展。</li></ol><p>在Linux操作系统中，<code>/etc/group</code>文件用于存储有关用户组的信息。每个用户组在文件中占一行，每行包含四个字段，用冒号（:）分隔。以下是<code>/etc/group</code>文件的详细说明：</p><ol><li><strong>（第一字段）组名</strong>：这一列定义了用户组的名称。</li><li><strong>（第二字段）组密码</strong>：这一列通常保留给组的密码，但很少使用。</li><li><strong>（第三字段）组ID</strong>：组ID是一个数字，系统用它来唯一标识每个组。</li><li><strong>（第四字段）组成员</strong>：这一列（如果有）列出了属于该组的用户列表，用逗号分隔。</li></ol><p>在Linux操作系统中，<code>/etc/gshadow</code>文件用于存储用户组的密码和其他与组密码相关的安全信息。</p><ol><li><strong>（第一字段）组名</strong>：这一列定义了用户组的名称，与<code>/etc/group</code>文件中的组名相对应。</li><li><strong>（第二字段）组密码</strong>：这一列包含了用户组的密码（如果设置了的话）。密码是加密存储的。</li><li><strong>（第三字段）组管理员列表</strong>：这一列列出了可以修改该组密码的用户列表，这些用户通常是组的管理员。用户之间用逗号分隔。</li><li><strong>（第四字段）组成员列表</strong>：这一列列出了属于该组的用户列表，这些用户可以不用组密码就能够访问组资源。用户之间同样用逗号分隔。</li></ol>`,74)]))}const u=a(l,[["render",p]]);export{g as __pageData,u as default};
